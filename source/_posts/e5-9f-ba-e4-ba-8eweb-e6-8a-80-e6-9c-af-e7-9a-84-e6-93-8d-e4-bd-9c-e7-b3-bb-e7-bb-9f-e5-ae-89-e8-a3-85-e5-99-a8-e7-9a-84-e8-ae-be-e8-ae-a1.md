---
title: '基于web技术的操作系统安装器的设计'
date: 2016-11-17 17:23:56
tags: [KVM,web开发,操作系统安装器,虚拟化]
published: true
hideInList: false
feature: 
isTop: false
---

### 什么是基于web技术的安装器(web-based installer)？

传统的Linux操作系统安装需要启动一个LiveOS，然后在LiveOS中运行一个本地安装程序，如Fedora下的Anaconda. LiveOS除了让用户在安装操作系统之前能预先体验之外，也为安装器提供了运行环境。这对于桌面操作系统已然足够，因为PC、笔记本电脑自带终端设备——键盘、显示器、鼠标。然而，如果要给一台服务器安装操作系统则稍微复杂了一点，因为服务器通常没有这些终端设备。这就需要利用网络和VNC将服务器端的图像传送出来。这样做的缺点在于，网络负载很大，在网络条件不好的环境下会带给用户非常差的安装体验。另外，本地安装器也会依赖很多的图形软件包，不仅会增加ISO的大小，也会带来很多版权及法律上的工作量。

基于web技术的安装器则利用web开发技术——HTML5,Javascript,CSS,web server等，让用户可以通过浏览器直接安装操作系统。目前，"KVM for IBM z Systems"已经采用这种安装方式。

### 基于web技术安装器的优势

*   依赖更少的软件包
*   非常小的网络负载，网页加载后只需要通过Ajax来与服务器通信
*   可通过浏览器跨平台访问
*   对于服务器及集群安装非常方便
*   易于与其他软件集成，提供RESTful API
*   满足可访问性，方便残障人士使用

### 使用web安装器的安装流程

使用web安装器来安装操作系统的流程非常简单，只需要如下几个步骤：

1.  加载ISO
2.  用https://{IP_OF_SERVER}作为URL来访问安装器
3.  按照安装器的引导完成安装
4.  点击安装器的重启按钮重启服务器，安装完成

### Web安装器实现的功能

*   国际化及多语言支持，选择安装语言与系统语言
*   版权声明
*   磁盘列表及选择安装磁盘
*   添加SCSI磁盘
*   添加DASD磁盘
*   Swap分区加密
*   自动分区
*   手动分区
*   分区操作列表
*   激活网卡
*   IPv4配置
*   IPv6配置
*   主机名及搜索域配置
*   NTP配置
*   Kdump配置
*   时区设置
*   Root密码设置
*   添加、删除用户
*   配置总结列表
*   无人值守安装
*   安装日志下载

### **Web安装器的架构设计**

Web安装器分为前端和后端两部分实现：前端负责UI展示及用户交互，后端负责给前端提供RESTful API并根据前端的API调用来存储用户配置数据，执行分区、安装、配置目标系统等操作。

Web安装器由4个HTML页面组成：

*   欢迎页：介绍操作系统，提供选择安装语言的下拉框，点击下一步可进入到版权声明页
*   版权声明页：显示版权文件，在用户同意后可跳转到配置页面
*   配置页：引导用户进行系统配置
*   安装页：展示安装进度，安装完成后可点击重启按钮重启系统

UI是基于HTML5、CSS3及Javascript等网页开发技术，并利用如下工具：

*   jQuery：一个快速、小巧且功能丰富的js库，可用来操作DOM，处理事件及Ajax请求
*   Bootstrap：最流行的前端开发框架之一，多用于开发响应式、移动优先的web项目
*   Bootstrap-select： jQuery 插件，利用Bootstrap，但提供了功能更加丰富的下拉选择框控件
*   Jquery Validation ：jQuery插件，用来检验表单的合法性

后端由以下几个模块组成：

*   CherryPy：一个轻量级的python web发布器
*   Model：存储用户的配置数据
*   RESTful API：为前端提供API接口
*   子功能模块：提供安装器的各个子功能