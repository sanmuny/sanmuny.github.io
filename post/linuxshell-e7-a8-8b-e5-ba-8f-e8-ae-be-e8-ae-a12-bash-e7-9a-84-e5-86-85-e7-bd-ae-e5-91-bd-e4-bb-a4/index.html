<!DOCTYPE html>
<html>
  <head>
      <meta http-equiv="content-type" content="text/html; charset=utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta content="yes" name="apple-mobile-web-app-capable" />
  <meta content="black" name="apple-mobile-web-app-status-bar-style" />
  <meta name="referrer" content="never">
  <meta name="keywords" content="">
  <meta name="description" content="">
  <meta name="author" content="kveln">
  <title>Linux shell 程序设计2——bash的内置命令 | 三木的技术博客</title>
  <link href="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/css/bootstrap.min.css" rel="stylesheet">
  <!-- <link href="https://sanmuny.github.io/media/css/bootstrap.min.css" rel="stylesheet"> -->
  <!--  <link href="https://sanmuny.github.io/media/css/all.min.css" rel="stylesheet" type="text/css"> -->
  <link href="https://cdn.bootcss.com/font-awesome/5.11.2/css/all.min.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
  <link rel="alternate" type="application/rss+xml" title="Linux shell 程序设计2——bash的内置命令 | 三木的技术博客 » Feed" href="https://sanmuny.github.io/atom.xml">
  <link rel="stylesheet"href="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/styles/androidstudio.min.css">
  <link href="https://sanmuny.github.io/styles/main.css" rel="stylesheet">
  <script src="https://cdn.bootcss.com/jquery/3.4.1/jquery.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/highlightjs/cdn-release@9.15.10/build/highlight.min.js"></script>
  <!-- <script src="https://sanmuny.github.io/media/scripts/jquery.min.js"></script> -->
  <script>hljs.initHighlightingOnLoad();</script>
  

    <meta property="og:description" content="Linux shell 程序设计2——bash的内置命令"/>
    <meta property="og:url" content="https://sanmuny.github.io/post/linuxshell-e7-a8-8b-e5-ba-8f-e8-ae-be-e8-ae-a12-bash-e7-9a-84-e5-86-85-e7-bd-ae-e5-91-bd-e4-bb-a4/"/>
    <meta property="og:locale" content="zh-CN"/>
    <meta property="og:type" content="website"/>
    <meta property="og:site_name" content="三木的技术博客"/>
  </head>
  <body>
  	<!-- Navigation -->
  <nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
    <div class="container">
      <a class="navbar-brand" href="https://sanmuny.github.io">三木的技术博客</a>
      <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
        Menu
        <i class="fas fa-bars"></i>
      </button>
      <div class="collapse navbar-collapse" id="navbarResponsive">
        <ul class="navbar-nav ml-auto">
          
          <li class="nav-item">
              
              <a class="nav-link" href="/">首页</a>
              
          </li>
          
          <li class="nav-item">
              
              <a class="nav-link" href="/archives">归档</a>
              
          </li>
          
          <li class="nav-item">
              
              <a class="nav-link" href="/tags">标签</a>
              
          </li>
          
          <li class="nav-item">
              
              <a class="nav-link" href="/post/about">关于</a>
              
          </li>
          
        </ul>
      </div>
    </div>
  </nav>
  <!-- Page Header -->
  <header class="masthead" style="background-image: url('https://sanmuny.github.io/media/images/home-bg.jpg')">
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
          	<span class="tags">
          	 
            <a href="https://sanmuny.github.io/tag/Iwme6rhyd-2/" class="tag">shell</a>
            
        </span>
            <h1>Linux shell 程序设计2——bash的内置命令</h1>
            <span class="meta">
            	Posted on
              2014-04-24，9 min read
            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <!-- Post Content -->
  <article>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <p>常用的内置命令忽略，来看看shell编程中其他一些重要的内置命令：</p>
<p>1、help：显示所有内置命令列表，或显示一个具体命令的用法。</p>
<p>-s： 表示列出命令的语法格式</p>
<p>例子：</p>
<p>help -s help help: help [-dms] [pattern ...]</p>
<p>2、echo：用来显示一行文字。默认自动换行。</p>
<pre><code>-n：取消自动换行。
-e：让字符串中的特殊字符起作用，即使字符串在单引号中。
</code></pre>
<p>例子： echo hello world 或 echo 'hello world' 或 echo &quot;hello world&quot; 输出结果为：hello world $echo -e &quot;hello \n world&quot; hello world $ echo -e 'hello \n world' hello world</p>
<p>3、printf：显示格式字符串，类似于c中的printf函数</p>
<p>格式：printf “格式字符串” 参数</p>
<pre><code>-v ：不显示到标准输出，而是赋值给-v选项后面的变量
</code></pre>
<p>例子：</p>
<pre><code>str= &quot;hello world&quot;
printf &quot;%s\n&quot; &quot;$str&quot;     执行结果：hello world

printf -v str &quot;hello world&quot; 
echo $str                      执行结果：hello world

printf &quot;%q&quot; &quot;hello world \n&quot; 执行结果：hello\ world\\n 无换行
</code></pre>
<p>%q这个选项我想了很久才弄明白它的含义：</p>
<p>将字符串或变量中的转义字符 用 源码格式替换。于是，上面的例子中，空格变成了\空格，\变成了\，而且\n没有了换行的作用</p>
<p>printf详细用法请参考博客：</p>
<p><a href="http://bbs.chinaunix.net/thread-845520-1-1.html">http://bbs.chinaunix.net/thread-845520-1-1.html</a></p>
<p>4、: 什么也不做，返回0</p>
<p>例子：</p>
<pre><code>:
echo $?                    运行结果：0
</code></pre>
<p>5、. 或 source ：在现行shell中执行shell程序</p>
<p>例子：</p>
<p>编辑脚本文件a_var.sh：</p>
<pre><code>#!/bin/bash
a=31
</code></pre>
<p>保存退出后回到终端，修改a_var.sh的权限并输入命令：</p>
<pre><code>./a_var.sh
</code></pre>
<p>执行，然后在终端执行：</p>
<pre><code>echo $a
</code></pre>
<p>输出结果为一个空行，意味着变量a的值为空，我们再以命令.空格a_var.sh 或source a_var.sh 执行，然后输入：</p>
<pre><code>echo $a                     其输出结果为：  31
</code></pre>
<p>第一种方式执行a_var.sh，bash会创建一个shell去执行，当子shell执行完成后，它的变量a会被系统收回。</p>
<p>6、alias：显示或设定程序别名</p>
<p>例子：</p>
<pre><code>alias          执行结果：列出所有的别名
alias ll='ls -al'  
ll               执行结果：等价于执行了  ls -al
</code></pre>
<p>7、unalias：取消别名</p>
<pre><code>alias ll
</code></pre>
<p>8、exit ：离开脚本或登录shell，可带返回值</p>
<p>exit 1</p>
<p>9、history：显示过去曾经执行过的shell指令，与history命令相关的有三个重要的变量：</p>
<p>HISTFILE ：记录存放历史命令文件的路径，如：</p>
<pre><code>echo $HISTFILE                    结果为：/home/kelvin/.bash_history
</code></pre>
<p>HISTFILESIZE：设置历史命令文件命令的最大个数，超过这个个数，序号在前的命令记录就会被删除</p>
<p>HISTSIZE：设置终端中交互式命令的历史记录个数。它和HISTFILESIZE相比的最小值起作用。</p>
<p>10、fc：列出登录主机后最近执行过的命令。一般和选项 -l 配合使用。</p>
<p>例子：</p>
<pre><code>$fc -l      结果：

363	 cat /etc/profile
364	 echo $HISTORY
365	 echo $HISTORYFILE
366	 echo $HISTFILE
367	 ehco $HISTFILESIZE
368	 echo $HISTFILESIZE
369	 echo $HISTSIZE
370	 history 
371	 history
372	 echo $HISTFILE
373	 lw
374	 ls
375	 fc -l
376	 fc -l 368
377	 fc -l echo l
378	 fc -l
fc -l 375     列出375行以后的命令                输出结果：
375	 fc -l
376	 fc -l 368
377	 fc -l echo l
378	 fc -l
fc -l 375 377 列出375到377之间的命令          输出结果：
375	 fc -l
376	 fc -l 368
377	 fc -l echo l
fc -l echo  l    列出从 关键字 echo 到 l之间的内容     输出结果：
372	 echo $HISTFILE
373	 lw
374	 ls
</code></pre>
<p>11、type：对一个命令的类型进行说明(包含命令行程序)。</p>
<p>例子：</p>
<pre><code>$type ls

ls 已被别名为“ls --color=auto”

$type cp

cp 是 /bin/cp

$type fc

fc 是一个 shell 内部命令
</code></pre>
<p>12、set：列出所有变量和函数的内容，加入选项可以设置bash的某个属性是否打开</p>
<p>例子：</p>
<pre><code>$set -o 查看所有属性，或打开某个属性

allexport      	off
braceexpand    	on
emacs          	on
errexit        	off
errtrace       	off
functrace      	off
hashall        	on
histexpand     	on
history        	on
ignoreeof      	off
interactive-comments	on
keyword        	off
monitor        	on
noclobber      	off
noexec         	off
noglob         	off
nolog          	off
notify         	off
nounset        	off
onecmd         	off
physical       	off
pipefail       	off
posix          	off
privileged     	off
verbose        	off
vi             	off
xtrace         	off

$set -o notify
set -o              打开notify属性后显示所有属性状态，输出结果：
allexport      	off
braceexpand    	on    
emacs          	on
errexit        	off
errtrace       	off
unctrace      	off
hashall        	on
histexpand     	on
history        	on
ignoreeof      	off
interactive-comments	on
keyword        	off
monitor        	on
noclobber      	off
noexec         	off
noglob         	off
nolog          	off
notify         	on
nounset        	off
onecmd         	off
physical       	off
pipef    ail       	off
posix          	off
privileged     	off    
verbose        	off
vi             	off
xtrace         	off

set  +o notify 
set -o         关闭notify属性，并显示所有属性状态：
allexport      	off
braceexpand    	on
emacs          	on
errexit        	off
errtrace       	off
functrace      	off
hashall        	on
histexpand     	on
history        	on
ignoreeof      	off
interactive-comments	on
keyword        	off
monitor        	on
noclobber      	off
noexec         	off
noglob         	off
nolog          	off
notify         	off
nounset        	off
onecmd         	off
physical       	off
pipefail       	off
posix          	off
privileged     	off
verbose        	off
vi             	off
xtrace         	off
</code></pre>
<p>set -C 或 set -o noclobber ：保护已存在文件，不让重定向覆盖文件内容，只能追加。</p>
<p>例如：</p>
<pre><code>set -C 
touch a.c
echo adfad &gt;  a.c  提示出错：
bash: a.c：无法覆盖已经存在的文件
</code></pre>
<p>但当我们追加内容时不会提示出错：</p>
<pre><code>echo adfasf &gt;&gt; a.c
</code></pre>
<p>可用set +C 取消</p>
<p>set -u：用于测试变量是否存在</p>
<p>例如：</p>
<pre><code>: $i
</code></pre>
<p>echo $? 这儿的返回值应该为1，因为变量i不存在</p>
<pre><code>i=1
: $i
</code></pre>
<p>echo $? 这儿的输出结果应该是0。同样，可以用set +u取消作用</p>
<p>set -v：显示当前shell的每一个执行命令，换句话说，就是把执行的命令打印出来</p>
<p>例如：</p>
<pre><code>kelvin@kelvin-Founder:~$ set -v
kelvin@kelvin-Founder:~$ ls
ls
a.c  Linux material  project_files  record  shell  software  桌面
</code></pre>
<p>可用于对shell脚本的排错，该属性可用set +v取消作用</p>
<p>13、shopt：很多方面都和set命令一样，但它增加了很多选项。</p>
<pre><code>-s：开启选项
-u：关闭选项
-o：set -o
-q：以返回值的形式表示开关状态，非0表示关，0表示开
</code></pre>
<p>set和shopt 的细节参见：</p>
<p><a href="http://blogold.chinaunix.net/u3/94271/showart.php?id=2195391">http://blogold.chinaunix.net/u3/94271/showart.php?id=2195391</a></p>
<p>14、read：从标准输入读取一行数据</p>
<p>例子：</p>
<pre><code>#!/bin/bash
echo &quot;please input your name &quot;
read your_name                             //如果不输入your_name，读取结果会默认存入变量ERPLY
echo &quot;your name is :&quot;  $your_name   
</code></pre>
<p>执行结果：</p>
<pre><code>please in put your name 
kelvin
your name is : kelvin
</code></pre>
<p>read -p &quot;提示信息&quot; ；所以上述sh脚本也可写成：</p>
<pre><code>#!/bin/bash
read -p &quot;please input your name&quot; your_name
echo &quot;your name is:&quot; $your_name
</code></pre>
<p>read -a arr：将一行数据存入数组arr</p>
<p>例如：</p>
<pre><code>read -a arr &lt;&lt;(echo 1 2 343 23) 
</code></pre>
<p>这样，echo ${arr[2]} 的输出结果就是343</p>
<p>read还可以读值给多个变量：</p>
<pre><code>IFS=':'
read f1 f2 f3 f4 f5 f6 f7 &lt; /etc/passwd
</code></pre>
<p>因为passwd中7个字段是由:分割开的，所以令IFS=':'</p>
<p>15、time：打印设置命令执行的real user sys时间，real 表示命令真正运行时间，cpu使用时间由两部分表示： user表示用户态程序执行时间， sys 表示系统调用时间。</p>
<p>例如：</p>
<pre><code>time ls
time ls
adf.sh  a_var.sh  name.sh

real	0m0.004s
user	0m0.000s
sys	0m0.000s
</code></pre>
<p>16、exec：后接命令或程序，执行命令或程序，并取代原来的shell执行环境；执行重定向生效，例如：</p>
<p>exec &lt; file 那么凡是由标准输入读入数据的操作都改为由file读入数据</p>
<p>17、eval：读取变量，并将变量的内容作为命令执行</p>
<p>例如：</p>
<pre><code>listlog=&quot;ls -al /var/log/*.log&quot;
eval $listlog
</code></pre>
<p>执行结果：ls -al /var/log/*.log将被执行。</p>

          
          <p class="next-post">下一篇：
            <a href="https://sanmuny.github.io/post/linuxshell-e7-a8-8b-e5-ba-8f-e8-ae-be-e8-ae-a11-e5-ae-89-e8-a3-85-e5-8f-8a-e5-85-a5-e9-97-a8/">
              <span class="post-title">
                Linux shell 程序设计1——安装及入门&rarr;
              </span>
            </a>
          </p>
        
        <div class="comment">
          
          
            <link rel="stylesheet" href="https://unpkg.com/gitalk/dist/gitalk.css">
<script src="https://unpkg.com/gitalk/dist/gitalk.min.js"></script>
<div id="gitalk-container"></div>
<script>
  var gitalk = new Gitalk({
    clientID: '2876d946eb87c573ec4e',
    clientSecret: '909799984d0e9eb3525ac5c3604e6b5fee270ccd',
    repo: 'sanmuny.github.io',
    owner: 'sanmuny',
    admin: ['sanmuny'],
    id: (location.pathname).substring(0, 49),      // Ensure uniqueness and length less than 50
    distractionFreeMode: false  // Facebook-like distraction free mode
  })
  gitalk.render('gitalk-container')
</script>

          
          
        
        </div>
      </div>
    </div>
  </article>
 <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <ul class="list-inline text-center">
            
            
            <li class="list-inline-item">
              <a href="https://github.com/sanmuny" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-github fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            
              
            
              
            
            <li class="list-inline-item">
              <a href="https://weibo.com/kelvinxupt" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fab fa-weibo fa-stack-1x fa-inverse"></i>
                </span>
              </a>
            </li>
            
              
            
              
            
              
            
              
            
              
              <li class="list-inline-item">
              <a href="https://sanmuny.github.io/atom.xml" target="_blank">
                <span class="fa-stack fa-lg">
                  <i class="fas fa-circle fa-stack-2x"></i>
                  <i class="fas fa-rss fa-stack-1x fa-inverse"></i>
                </span>
              </a>
              </li>
          </ul>
          <p class="copyright text-muted">Copyright &copy;<span>三木的技术博客</span><br><a href="https://github.com/getgridea/gridea" class="Themeinfo">Powered by Gridea</a></p>
        </div>
      </div>
    </div>
   </footer>
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.bootcss.com/twitter-bootstrap/4.3.1/js/bootstrap.bundle.min.js"></script>
  <!-- <script src="https://sanmuny.github.io/media/scripts/bootstrap.bundle.min.js"></script> -->
  <!-- Bootstrap core JavaScript -->
  <script src="https://cdn.jsdelivr.net/gh/Alanrk/clean-cdn@1.0/scripts/clean-blog.min.js"></script>
  <!-- <script src="https://sanmuny.github.io/media/scripts/clean-blog.min.js"></script> -->
  <script src="//instant.page/3.0.0" type="module" defer integrity="sha384-OeDn4XE77tdHo8pGtE1apMPmAipjoxUQ++eeJa6EtJCfHlvijigWiJpD7VDPWXV1"></script>
  <style type="text/css">a.back_to_top{text-decoration:none;position:fixed;bottom:40px;right:30px;background:#f0f0f0;height:40px;width:40px;border-radius:50%;line-height:36px;font-size:18px;text-align:center;transition-duration:.5s;transition-propety:background-color;display:none}a.back_to_top span{color:#888}a.back_to_top:hover{cursor:pointer;background:#dfdfdf}a.back_to_top:hover span{color:#555}@media print,screen and(max-width:580px){.back_to_top{display:none!important}}</style>
<a id="back_to_top" href="#" class="back_to_top">
  <span>▲</span></a>
<script>$(document).ready((function(_this) {
    return function() {
      var bt;
      bt = $('#back_to_top');
      if ($(document).width() > 480) {
        $(window).scroll(function() {
          var st;
          st = $(window).scrollTop();
          if (st > 30) {
            return bt.css('display', 'block')
          } else {
            return bt.css('display', 'none')
          }
        });
        return bt.click(function() {
          $('body,html').animate({
            scrollTop: 0
          },
          800);
          return false
        })
      }
    }
  })(this));</script>
  </body>
</html>

